#!/bin/bash

# Pre-push hook for registry-frontend
# Runs tests and type checking before allowing pushes

set -e

echo "ğŸ” Running pre-push validation..."

# Run type checking
echo "ğŸ” Running TypeScript type checking..."
npx --yes typescript@latest tsc --noEmit || {
    echo "âŒ TypeScript type checking failed"
    echo "ğŸ’¡ Fix type errors before pushing"
    exit 1
}

# Run tests
echo "ğŸ§ª Running tests..."
npm run test || {
    echo "âŒ Tests failed"
    echo "ğŸ’¡ Fix failing tests before pushing"
    exit 1
}

echo "âœ… Pre-push validation passed!"
echo "ğŸ“Š Completed checks:"
echo "   âœ… TypeScript type checking"
echo "   âœ… Tests"

exit 0
