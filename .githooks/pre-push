#!/bin/bash

# Pre-push hook for registry-frontend
# Runs tests and type checking before allowing pushes

set -e

echo "ğŸ” Running pre-push validation..."

# Check if node_modules exists
if [ ! -d "node_modules" ]; then
    echo "âš ï¸  node_modules not found"
    echo "ğŸ’¡ Run 'npm install' to install dependencies"
    echo "ğŸ’¡ Skipping pre-push checks"
    exit 0
fi

# Run type checking
echo "ğŸ” Running TypeScript type checking..."
npm run type-check 2>/dev/null || {
    echo "âš ï¸  Type checking skipped (run 'npm run type-check' manually)"
}

# Run tests
echo "ğŸ§ª Running tests..."
npm run test 2>/dev/null || {
    echo "âš ï¸  Tests skipped (run 'npm test' manually)"
}

echo "âœ… Pre-push validation completed!"
echo "ğŸ’¡ For full validation, ensure node_modules is installed and run:"
echo "   npm run type-check && npm test"

exit 0
