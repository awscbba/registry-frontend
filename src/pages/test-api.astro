---
import Layout from '../layouts/Layout.astro';
---

<Layout title="API Test">
  <div style="padding: 20px;">
    <h1>API Test Page</h1>
    <button id="testApi">Test API Call</button>
    <div id="result" style="margin-top: 20px; padding: 10px; background: #f5f5f5; white-space: pre-wrap;"></div>
  </div>

  <script>
    document.getElementById('testApi').addEventListener('click', async () => {
      const resultDiv = document.getElementById('result');
      resultDiv.textContent = 'Loading...';
      
      try {
        console.log('Testing API call...');
        const response = await fetch('https://2t9blvt2c1.execute-api.us-east-1.amazonaws.com/prod/v2/projects', {
          headers: {
            'Content-Type': 'application/json'
          }
        });
        
        console.log('Response status:', response.status);
        console.log('Response ok:', response.ok);
        
        const data = await response.json();
        console.log('Response data:', data);
        
        resultDiv.textContent = `Status: ${response.status}\nData: ${JSON.stringify(data, null, 2)}`;
      } catch (error) {
        console.error('API test error:', error);
        resultDiv.textContent = `Error: ${error.message}`;
      }
    });
  </script>
</Layout>
