---
import UserMenu from '../components/UserMenu';
import { StoreInitializer } from '../components/StoreInitializer';
import ToastContainer from '../components/ToastContainer';

export interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!DOCTYPE html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Sistema Global de Registro de Personas - AWS User Group Cochabamba" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
	</head>
	<body>
		<!-- Initialize stores once on app load -->
		<StoreInitializer client:only="react" />
		
		<!-- Toast notifications (no provider needed) -->
		<ToastContainer client:load />
		
		<!-- Header -->
			<header>
				<div class="container">
					<div class="logo">
						<div class="logo-icon">üåç</div>
						<div class="logo-text">
							<h1>AWS User Group Cochabamba</h1>
							<span class="subtitle">Registro Global de Personas</span>
						</div>
					</div>
					<div class="header-right">
						<nav>
							<ul>
								<li><a href="/" class="active">Registro</a></li>
								<li><a href="https://cbba.cloud.org.bo/aws" target="_blank">Sitio Principal</a></li>
								<li><a href="https://cbba.cloud.org.bo/aws/events" target="_blank">Eventos</a></li>
							</ul>
						</nav>
						<UserMenu client:load />
					</div>
				</div>
			</header>

			<!-- Main Content -->
			<main>
				<slot />
			</main>

			<!-- Footer -->
			<footer>
				<div class="container">
					<div class="footer-content">
						<div class="footer-logo">
							<div class="footer-icon">üåç</div>
							<p>AWS User Group Cochabamba - Sistema Global de Registro de Personas</p>
						</div>
						<div class="footer-links">
							<h3>Enlaces</h3>
							<ul>
								<li><a href="https://cbba.cloud.org.bo/aws" target="_blank">Sitio Principal</a></li>
								<li><a href="https://cbba.cloud.org.bo/aws/events" target="_blank">Eventos</a></li>
								<li><a href="https://cbba.cloud.org.bo/aws/contact" target="_blank">Contacto</a></li>
							</ul>
						</div>
						<div class="footer-social">
							<h3>S√≠guenos</h3>
							<div class="social-icons">
								<a href="#" class="social-icon" aria-label="LinkedIn">
									<svg viewBox="0 0 24 24" width="20" height="20">
										<path fill="currentColor" d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
									</svg>
								</a>
								<a href="#" class="social-icon" aria-label="Twitter">
									<svg viewBox="0 0 24 24" width="20" height="20">
										<path fill="currentColor" d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
									</svg>
								</a>
							</div>
						</div>
					</div>
					<div class="copyright">
						<p>&copy; 2025 AWS User Group Cochabamba. Todos los derechos reservados.</p>
					</div>
				</div>
			</footer>
	</body>
</html>

<style is:global>
	/* AWS Cocha Global Styles */
	:root {
		--primary-color: #161d2b;    /* Dark navy blue for header */
		--secondary-color: #FF9900;  /* AWS orange */
		--accent-color: #4A90E2;     /* Lighter blue from logo */
		--light-color: #F8F8F8;
		--dark-color: #333333;
		--text-color: #333333;
		--border-color: #E0E0E0;
		--success-color: #28a745;
		--error-color: #dc3545;
		--warning-color: #d35400;    /* WCAG 2.1 AA compliant orange */
		--focus-color: #4A90E2;      /* Focus indicator color */
	}

	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
	}

	html {
		font-size: 16px;
		scroll-behavior: smooth;
	}

	body {
		font-family: 'Open Sans', sans-serif;
		line-height: 1.6;
		color: var(--text-color);
		background-color: var(--light-color);
		overflow-x: hidden;
	}

	.container {
		width: 100%;
		max-width: 1200px;
		margin: 0 auto;
		padding: 0 20px;
	}

	/* Header Styles */
	header {
		background-color: var(--primary-color);
		color: white;
		padding: 15px 0;
		position: sticky;
		top: 0;
		z-index: 100;
		box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
	}

	header .container {
		display: flex;
		justify-content: space-between;
		align-items: center;
		gap: 20px;
	}

	.header-right {
		display: flex;
		align-items: center;
		gap: 20px;
	}

	.logo {
		display: flex;
		align-items: center;
		gap: 15px;
	}

	.logo-icon {
		font-size: 2.5rem;
		border-radius: 8px;
		background: rgba(255, 255, 255, 0.1);
		padding: 8px;
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.logo-text h1 {
		font-size: 1.3rem;
		margin: 0;
		color: white;
		line-height: 1.2;
	}

	.logo-text .subtitle {
		font-size: 0.9rem;
		color: var(--secondary-color);
		font-weight: 600;
	}

	nav ul {
		display: flex;
		list-style: none;
		gap: 20px;
	}

	nav ul li a {
		color: white;
		text-decoration: none;
		font-weight: 600;
		padding: 8px 16px;
		border-radius: 4px;
		transition: all 0.3s ease;
	}

	nav ul li a:hover,
	nav ul li a.active {
		background-color: var(--secondary-color);
		color: var(--primary-color);
	}

	/* Focus indicators for accessibility */
	nav ul li a:focus {
		outline: 2px solid var(--focus-color);
		outline-offset: 2px;
		background-color: var(--secondary-color);
		color: var(--primary-color);
	}

	/* Main Content */
	main {
		min-height: calc(100vh - 200px);
		padding: 40px 0;
	}

	/* Footer */
	footer {
		background-color: var(--dark-color);
		color: white;
		padding: 40px 0 20px;
		margin-top: 60px;
	}

	.footer-content {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
		gap: 30px;
		margin-bottom: 30px;
	}

	.footer-logo {
		display: flex;
		flex-direction: column;
		gap: 10px;
	}

	.footer-icon {
		font-size: 2rem;
		width: 40px;
		height: 40px;
		border-radius: 4px;
		background: rgba(255, 255, 255, 0.1);
		display: flex;
		align-items: center;
		justify-content: center;
	}

	.footer-links h3,
	.footer-social h3 {
		margin-bottom: 15px;
		color: var(--secondary-color);
		font-size: 1.1rem;
	}

	.footer-links ul {
		list-style: none;
	}

	.footer-links ul li {
		margin-bottom: 8px;
	}

	.footer-links ul li a {
		color: white;
		text-decoration: none;
		transition: color 0.3s ease;
	}

	.footer-links ul li a:hover {
		color: var(--secondary-color);
	}

	.social-icons {
		display: flex;
		gap: 10px;
	}

	.social-icon {
		display: flex;
		align-items: center;
		justify-content: center;
		width: 35px;
		height: 35px;
		background-color: rgba(255, 255, 255, 0.1);
		border-radius: 50%;
		transition: background-color 0.3s ease;
		color: white;
		text-decoration: none;
	}

	.social-icon:hover {
		background-color: var(--secondary-color);
	}

	.social-icon:focus {
		outline: 2px solid var(--focus-color);
		outline-offset: 2px;
		background-color: var(--secondary-color);
	}

	/* Global accessibility improvements */
	
	/* Enhanced focus indicators for all interactive elements */
	button:focus,
	input:focus,
	textarea:focus,
	select:focus,
	a:focus {
		outline: 2px solid var(--focus-color);
		outline-offset: 2px;
	}

	/* Remove default outline and add custom focus styles */
	button:focus-visible,
	input:focus-visible,
	textarea:focus-visible,
	select:focus-visible,
	a:focus-visible {
		outline: 2px solid var(--focus-color);
		outline-offset: 2px;
	}

	/* Ensure sufficient color contrast for disabled elements */
	button:disabled,
	input:disabled,
	textarea:disabled,
	select:disabled {
		opacity: 0.6;
		cursor: not-allowed;
	}

	/* High contrast mode support */
	@media (prefers-contrast: high) {
		:root {
			--text-color: #000000;
			--border-color: #000000;
		}
		
		button, input, textarea, select {
			border: 2px solid var(--text-color);
		}
	}

	/* Reduced motion support */
	@media (prefers-reduced-motion: reduce) {
		*,
		*::before,
		*::after {
			animation-duration: 0.01ms !important;
			animation-iteration-count: 1 !important;
			transition-duration: 0.01ms !important;
		}
	}

	.copyright {
		text-align: center;
		padding-top: 20px;
		border-top: 1px solid rgba(255, 255, 255, 0.1);
		font-size: 0.9rem;
		opacity: 0.8;
	}

	/* Responsive */
	@media (max-width: 768px) {
		.container {
			padding: 0 0.75rem;
		}

		.logo-text h1 {
			font-size: 1.1rem;
		}
		
		.logo-text .subtitle {
			font-size: 0.8rem;
		}

		nav ul {
			flex-direction: column;
			gap: 10px;
		}

		nav ul li a {
			padding: 6px 12px;
			font-size: 0.9rem;
		}

		.footer-content {
			grid-template-columns: 1fr;
			gap: 20px;
		}

		/* Mobile-specific improvements */
		header .container {
			flex-wrap: wrap;
			gap: 1rem;
		}

		.header-right {
			flex-direction: column;
			width: 100%;
			gap: 1rem;
		}

		nav {
			width: 100%;
		}

		nav ul {
			justify-content: center;
			flex-wrap: wrap;
		}

		/* Improve touch targets */
		nav ul li a {
			min-height: 44px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		/* Better mobile spacing */
		main {
			padding: 1rem 0;
		}
	}
</style>
